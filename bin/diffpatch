#!/usr/bin/env node

/* eslint-env node */

import { DiffPatcher } from '../lib/index.js';
import ConsoleFormatter from '../lib/formatters/console.js';

import fs from 'node:fs';

const fileLeft = process.argv[2];
const fileRight = process.argv[3];

if (!fileLeft || !fileRight) {
  console.log('\n  USAGE: diffpatch left.json right.json');
  process.exit(1);
}

const left = JSON.parse(fs.readFileSync(fileLeft));
const right = JSON.parse(fs.readFileSync(fileRight));

const delta = new DiffPatcher().diff(left, right);

console.log(new ConsoleFormatter().format(delta));
